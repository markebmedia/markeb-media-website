<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Book Your Shoot - Markeb Media</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body { 
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      min-height: 100vh;
      padding: 40px 20px;
      color: #1e293b;
    }

    .booking-container {
      max-width: 800px;
      margin: 0 auto;
    }

    .booking-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .booking-header h1 {
      font-size: 42px;
      font-weight: 700;
      color: #fff;
      margin-bottom: 12px;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .booking-header p {
      font-size: 18px;
      color: rgba(255, 255, 255, 0.9);
    }

    .booking-card {
      background: #fff;
      border-radius: 20px;
      padding: 48px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .step-indicator {
      display: flex;
      justify-content: space-between;
      margin-bottom: 48px;
      position: relative;
    }

    .step-indicator::before {
      content: '';
      position: absolute;
      top: 20px;
      left: 0;
      right: 0;
      height: 2px;
      background: #e2e8f0;
      z-index: 0;
    }

    .step {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      z-index: 1;
      background: #fff;
      padding: 0 10px;
    }

    .step-number {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #e2e8f0;
      color: #94a3b8;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .step.active .step-number {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      color: #fff;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
    }

    .step.completed .step-number {
      background: #10b981;
      color: #fff;
    }

    .step-label {
      font-size: 13px;
      font-weight: 600;
      color: #94a3b8;
    }

    .step.active .step-label {
      color: #3b82f6;
    }

    .form-section {
      display: none;
    }

    .form-section.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .form-group {
      margin-bottom: 28px;
    }

    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: #334155;
      margin-bottom: 8px;
    }

    .form-input {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 16px;
      font-family: 'Inter', sans-serif;
      transition: all 0.2s ease;
    }

    .form-input:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .form-input.error {
      border-color: #ef4444;
    }

    .error-message {
      color: #ef4444;
      font-size: 13px;
      margin-top: 6px;
      display: none;
    }

    .error-message.show {
      display: block;
    }

    .info-box {
      background: #eff6ff;
      border: 2px solid #3b82f6;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 28px;
      display: none;
    }

    .info-box.show {
      display: block;
    }

    .info-box.success {
      background: #f0fdf4;
      border-color: #10b981;
    }

    .info-box.warning {
      background: #fef3c7;
      border-color: #f59e0b;
    }

    .info-box-title {
      font-weight: 700;
      font-size: 16px;
      margin-bottom: 8px;
      color: #1e293b;
    }

    .info-box-text {
      font-size: 14px;
      color: #64748b;
      line-height: 1.6;
    }

    .territory-badge {
      display: inline-block;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .territory-badge.north {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      color: #fff;
    }

    .territory-badge.south {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color: #fff;
    }

    .btn {
      padding: 14px 32px;
      border-radius: 10px;
      font-weight: 600;
      font-size: 16px;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: 'Inter', sans-serif;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      color: #fff;
      width: 100%;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(59, 130, 246, 0.4);
    }

    .btn-primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .btn-secondary {
      background: #f1f5f9;
      color: #64748b;
    }

    .btn-secondary:hover {
      background: #e2e8f0;
    }

    .button-group {
      display: flex;
      gap: 12px;
      margin-top: 32px;
    }

    .loading-spinner {
      display: none;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top: 3px solid #fff;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .btn-primary.loading .loading-spinner {
      display: block;
    }

    .btn-primary.loading span {
      display: none;
    }

    .service-card {
      background: #fff;
      border: 3px solid #e2e8f0;
      border-radius: 12px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 20px;
      position: relative;
      overflow: hidden;
    }

    .service-card:hover {
      border-color: #3b82f6;
      transform: translateX(4px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
    }

    .service-card.selected {
      border-color: #3b82f6;
      background: #eff6ff;
    }

    .service-card.popular {
      border-color: #10b981;
    }

    .popular-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: #fff;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .service-radio {
      width: 24px;
      height: 24px;
      border: 3px solid #e2e8f0;
      border-radius: 50%;
      flex-shrink: 0;
      transition: all 0.2s ease;
    }

    .service-card:hover .service-radio {
      border-color: #3b82f6;
    }

    .service-card.selected .service-radio {
      border-color: #3b82f6;
      background: #3b82f6;
      position: relative;
    }

    .service-card.selected .service-radio::after {
      content: '✓';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fff;
      font-size: 14px;
      font-weight: 700;
    }

    .bedroom-btn:hover {
      border-color: #3b82f6;
      color: #3b82f6;
      transform: scale(1.05);
    }

    .bedroom-btn:active {
      transform: scale(0.95);
    }

    .calendar-day {
      aspect-ratio: 1;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      background: #fff;
      color: #1e293b;
    }

    .calendar-day.day-label {
      background: transparent;
      border: none;
      font-size: 12px;
      font-weight: 700;
      color: #94a3b8;
      cursor: default;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .calendar-day.disabled {
      background: #f8fafc;
      color: #cbd5e1;
      cursor: not-allowed;
    }

    .calendar-day.other-month {
      color: #cbd5e1;
    }

    .calendar-day:not(.disabled):not(.day-label):not(.other-month):hover {
      border-color: #3b82f6;
      background: #eff6ff;
      transform: scale(1.05);
    }

    .calendar-day.selected {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      border-color: #3b82f6;
      color: #fff;
    }

    .calendar-day.today {
      border-color: #10b981;
      font-weight: 700;
    }

    .time-slot {
      padding: 12px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      text-align: center;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      background: #fff;
      color: #1e293b;
    }

    .time-slot:hover {
      border-color: #3b82f6;
      background: #eff6ff;
      transform: translateY(-2px);
    }

    .time-slot.selected {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      border-color: #3b82f6;
      color: #fff;
    }

    .time-slot.disabled {
      background: #f8fafc;
      color: #cbd5e1;
      cursor: not-allowed;
      border-color: #f1f5f9;
    }

    .time-slot.disabled:hover {
      transform: none;
      border-color: #f1f5f9;
      background: #f8fafc;
    }

    .payment-option {
      background: #fff;
      border: 3px solid #e2e8f0;
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 12px;
    }

    .payment-option:hover {
      border-color: #3b82f6;
      transform: translateX(4px);
    }

    .payment-option.selected {
      border-color: #3b82f6;
      background: #eff6ff;
    }

    .payment-radio {
      width: 24px;
      height: 24px;
      border: 3px solid #e2e8f0;
      border-radius: 50%;
      flex-shrink: 0;
      transition: all 0.2s ease;
    }

    .payment-option:hover .payment-radio {
      border-color: #3b82f6;
    }

    .payment-option.selected .payment-radio {
      border-color: #3b82f6;
      background: #3b82f6;
      position: relative;
    }

    .payment-option.selected .payment-radio::after {
      content: '✓';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fff;
      font-size: 14px;
      font-weight: 700;
    }

    @media (max-width: 768px) {
      body {
        padding: 20px 12px;
      }

      .booking-header h1 {
        font-size: 32px;
      }

      .booking-card {
        padding: 32px 24px;
      }

      .step-indicator {
        flex-wrap: wrap;
      }

      .step {
        font-size: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="booking-container">
    <!-- Header -->
    <div class="booking-header">
      <div style="margin-bottom: 20px;">
        <img src="https://cdn.prod.website-files.com/66e82259bc314e521e9902b0/66e82259bc314e521e990386_Markeb%20Media%20(4).svg" alt="Markeb Media" style="height: 60px;">
      </div>
      <h1>Book Your Shoot</h1>
      <p>Professional property photography in the UK</p>
    </div>

    <!-- Booking Card -->
    <div class="booking-card">
      <!-- Step Indicator -->
      <div class="step-indicator">
        <div class="step active" id="step1Indicator">
          <div class="step-number">1</div>
          <div class="step-label">Location</div>
        </div>
        <div class="step" id="step2Indicator">
          <div class="step-number">2</div>
          <div class="step-label">Date & Time</div>
        </div>
        <div class="step" id="step3Indicator">
          <div class="step-number">3</div>
          <div class="step-label">Service</div>
        </div>
        <div class="step" id="step4Indicator">
          <div class="step-number">4</div>
          <div class="step-label">Details</div>
        </div>
        <div class="step" id="step5Indicator">
          <div class="step-number">5</div>
          <div class="step-label">Payment</div>
        </div>
      </div>

      <!-- Step 1: Postcode Check -->
      <div class="form-section active" id="step1">
        <h2 style="font-size: 24px; font-weight: 700; margin-bottom: 12px; color: #1e293b;">
          Where is your property?
        </h2>
        <p style="font-size: 14px; color: #64748b; margin-bottom: 28px;">
          Enter your postcode so we can check availability in your area
        </p>

        <div class="form-group">
          <label class="form-label" for="postcode">Property Postcode *</label>
          <input 
            type="text" 
            id="postcode" 
            class="form-input" 
            placeholder="e.g. LE2 7LH"
            style="text-transform: uppercase;"
            maxlength="8"
          />
          <div class="error-message" id="postcodeError">Please enter a valid UK postcode</div>
        </div>

        <!-- Territory Info Box (hidden initially) -->
        <div class="info-box" id="territoryInfo">
          <div class="info-box-title">
            Great news! We cover your area
          </div>
          <div class="info-box-text">
            Your property is in our <span id="territoryBadge"></span> territory.
            <br><br>
            <strong>Your photographer:</strong> <span id="photographerName"></span>
          </div>
        </div>

        <div class="info-box warning" id="unavailableInfo">
          <div class="info-box-title">
            Sorry, we don't cover this area yet
          </div>
          <div class="info-box-text">
            We're currently only available in the Midlands and surrounding areas. Please contact us directly if you'd like to discuss options.
          </div>
        </div>

        <!-- Address Form (shown after postcode validation) -->
        <div id="addressSection" style="display: none;">
          <div class="form-group">
            <label class="form-label" for="propertyAddress">Full Property Address *</label>
            <input 
              type="text" 
              id="propertyAddress" 
              class="form-input" 
              placeholder="e.g. 123 High Street, Leicester"
            />
            <div style="font-size: 12px; color: #64748b; margin-top: 6px;">
              This helps us plan the best route and ensure accurate timing
            </div>
            <div class="error-message" id="addressError">Please enter the property address</div>
          </div>
        </div>

        <div class="button-group">
          <button class="btn btn-primary" id="checkPostcodeBtn" onclick="checkPostcode()">
            <div class="loading-spinner"></div>
            <span>Check Availability</span>
          </button>
          <button class="btn btn-primary" id="continueWithAddressBtn" onclick="proceedToCalendar()" style="display: none;">
            <span>Continue to Date Selection</span>
          </button>
        </div>
      </div>

      <!-- Step 2: Date & Time Selection -->
      <div class="form-section" id="step2">
        <h2 style="font-size: 24px; font-weight: 700; margin-bottom: 12px; color: #1e293b;">
          Choose Date & Time
        </h2>
        <p style="font-size: 14px; color: #64748b; margin-bottom: 28px;">
          Select your preferred date and time for the shoot
        </p>

        <!-- Calendar -->
        <div style="background: #fff; border: 2px solid #e2e8f0; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
          <!-- Calendar Header -->
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
            <button type="button" onclick="changeMonth(-1)" style="width: 40px; height: 40px; border-radius: 8px; border: 2px solid #e2e8f0; background: #fff; cursor: pointer; font-size: 18px; font-weight: 700; color: #64748b;">‹</button>
            <h3 id="calendarMonth" style="font-size: 18px; font-weight: 700; color: #1e293b;">Loading...</h3>
            <button type="button" onclick="changeMonth(1)" style="width: 40px; height: 40px; border-radius: 8px; border: 2px solid #e2e8f0; background: #fff; cursor: pointer; font-size: 18px; font-weight: 700; color: #64748b;">›</button>
          </div>

          <!-- Calendar Grid -->
          <div id="calendarGrid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px;">
            <!-- Days will be inserted here -->
          </div>
        </div>

        <!-- Time Slots -->
        <div id="timeSlotSection" style="display: none; margin-bottom: 24px;">
          <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin-bottom: 16px;">
            Available Times for <span id="selectedDateDisplay"></span>
          </h3>
          <div id="timeSlotGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 12px;">
            <!-- Time slots will be inserted here -->
          </div>
          <div id="loadingTimeSlots" style="text-align: center; padding: 40px; color: #64748b;">
            <div class="spinner" style="margin: 0 auto 20px;"></div>
            <p>Checking availability...</p>
          </div>
        </div>

        <div class="button-group">
          <button type="button" class="btn btn-secondary" onclick="goToStep(1)" style="flex: 1;">
            Back
          </button>
          <button type="button" class="btn btn-primary" id="continueToServiceBtn" onclick="goToStep(3)" style="flex: 2;" disabled>
            <span>Continue to Services</span>
          </button>
        </div>
      </div>

      <!-- Step 3: Service Selection -->
      <div class="form-section" id="step3">
        <h2 style="font-size: 24px; font-weight: 700; margin-bottom: 12px; color: #1e293b;">
          Choose Your Service
        </h2>
        <p style="font-size: 14px; color: #64748b; margin-bottom: 28px;">
          Select the photography service that best suits your property
        </p>

        <!-- Service Cards -->
        <div id="serviceCards" style="display: flex; flex-direction: column; gap: 16px; margin-bottom: 28px;">
          <!-- Services will be dynamically inserted here -->
        </div>

        <!-- Bedroom Counter (only shown for property services) -->
        <div id="bedroomSection" style="display: none;">
          <div class="form-group">
            <label class="form-label">Number of Bedrooms</label>
            <div style="display: flex; align-items: center; gap: 16px;">
              <button type="button" class="bedroom-btn" onclick="adjustBedrooms(-1)" style="width: 50px; height: 50px; border-radius: 10px; border: 2px solid #e2e8f0; background: #fff; font-size: 24px; font-weight: 700; color: #64748b; cursor: pointer; transition: all 0.2s;">-</button>
              <div style="flex: 1; text-align: center;">
                <div id="bedroomCount" style="font-size: 48px; font-weight: 700; color: #3b82f6;">4</div>
                <div style="font-size: 13px; color: #64748b; margin-top: 4px;">bedrooms</div>
              </div>
              <button type="button" class="bedroom-btn" onclick="adjustBedrooms(1)" style="width: 50px; height: 50px; border-radius: 10px; border: 2px solid #e2e8f0; background: #fff; font-size: 24px; font-weight: 700; color: #64748b; cursor: pointer; transition: all 0.2s;">+</button>
            </div>
            <div id="bedroomFeeNotice" style="display: none; margin-top: 12px; padding: 12px; background: #fef3c7; border: 2px solid #f59e0b; border-radius: 8px; font-size: 13px; color: #92400e;">
              <strong>Additional £30 fee</strong> applies for properties with more than 4 bedrooms
            </div>
          </div>
        </div>

        <!-- Price Breakdown -->
        <div id="priceBreakdown" style="background: #f8fafc; border-radius: 12px; padding: 24px; margin-bottom: 28px; display: none;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <span style="font-size: 14px; color: #64748b;">Service</span>
            <span style="font-size: 14px; font-weight: 600; color: #1e293b;" id="servicePrice">£0.00</span>
          </div>
          <div id="bedroomFeeRow" style="display: none; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <span style="font-size: 14px; color: #64748b;">Extra bedrooms (5+)</span>
            <span style="font-size: 14px; font-weight: 600; color: #1e293b;">£30.00</span>
          </div>
          <div style="border-top: 2px solid #e2e8f0; margin: 16px 0;"></div>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 18px; font-weight: 700; color: #1e293b;">Total</span>
            <span style="font-size: 24px; font-weight: 700; color: #3b82f6;" id="totalPrice">£0.00</span>
          </div>
          <div style="font-size: 12px; color: #94a3b8; text-align: right; margin-top: 4px;">Inc. VAT</div>
        </div>

        <div class="button-group">
          <button type="button" class="btn btn-secondary" onclick="goToStep(2)" style="flex: 1;">
            Back
          </button>
          <button type="button" class="btn btn-primary" id="continueToDetailsBtn" onclick="goToStep(4)" style="flex: 2;" disabled>
            <span>Continue to Details</span>
          </button>
        </div>
      </div>

      <!-- Step 4: Client Details & Payment -->
      <div class="form-section" id="step4">
        <h2 style="font-size: 24px; font-weight: 700; margin-bottom: 12px; color: #1e293b;">
          Your Details
        </h2>
        <p style="font-size: 14px; color: #64748b; margin-bottom: 28px;">
          Please provide your contact information
        </p>

        <!-- Client Details Form -->
        <div class="form-group">
          <label class="form-label" for="clientName">Full Name *</label>
          <input 
            type="text" 
            id="clientName" 
            class="form-input" 
            placeholder="e.g. John Smith"
          />
          <div class="error-message" id="nameError">Please enter your full name</div>
        </div>

        <div class="form-group">
          <label class="form-label" for="clientEmail">Email Address *</label>
          <input 
            type="email" 
            id="clientEmail" 
            class="form-input" 
            placeholder="e.g. john@example.com"
          />
          <div class="error-message" id="emailError">Please enter a valid email address</div>
        </div>

        <div class="form-group">
          <label class="form-label" for="clientPhone">Phone Number *</label>
          <input 
            type="tel" 
            id="clientPhone" 
            class="form-input" 
            placeholder="e.g. 07700 900123"
          />
          <div class="error-message" id="phoneError">Please enter a valid UK phone number</div>
        </div>

        <div class="form-group">
          <label class="form-label" for="clientNotes">Special Requirements (Optional)</label>
          <textarea 
            id="clientNotes" 
            class="form-input" 
            placeholder="Any special requirements or notes for the photographer..."
            rows="4"
            style="resize: vertical; min-height: 100px;"
          ></textarea>
        </div>

        <!-- Booking Summary -->
        <div style="background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border: 2px solid #3b82f6; border-radius: 12px; padding: 24px; margin-bottom: 28px;">
          <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin-bottom: 16px;">
            Booking Summary
          </h3>
          <div style="display: grid; gap: 12px; font-size: 14px;">
            <div style="display: flex; justify-content: space-between;">
              <span style="color: #64748b;">Property:</span>
              <span style="font-weight: 600; color: #1e293b; text-align: right;" id="summaryAddress">-</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span style="color: #64748b;">Date & Time:</span>
              <span style="font-weight: 600; color: #1e293b;" id="summaryDateTime">-</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span style="color: #64748b;">Service:</span>
              <span style="font-weight: 600; color: #1e293b; text-align: right;" id="summaryService">-</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span style="color: #64748b;">Photographer:</span>
              <span style="font-weight: 600; color: #1e293b;" id="summaryPhotographer">-</span>
            </div>
            <div style="border-top: 2px solid #3b82f6; margin: 8px 0;"></div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <span style="font-size: 16px; font-weight: 700; color: #1e293b;">Total Amount:</span>
              <span style="font-size: 24px; font-weight: 700; color: #3b82f6;" id="summaryTotal">£0.00</span>
            </div>
          </div>
        </div>

        <!-- Payment Options -->
        <div style="margin-bottom: 28px;">
          <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin-bottom: 16px;">
            Payment Options
          </h3>
          
          <div class="payment-option" onclick="selectPaymentOption('pay-now')">
            <div style="flex: 1;">
              <div style="font-weight: 700; font-size: 16px; color: #1e293b; margin-bottom: 4px;">
                Pay Now
              </div>
              <div style="font-size: 13px; color: #64748b;">
                Secure payment via Stripe. Your booking is confirmed immediately.
              </div>
            </div>
            <div class="payment-radio"></div>
          </div>

          <div class="payment-option" onclick="selectPaymentOption('reserve')">
            <div style="flex: 1;">
              <div style="font-weight: 700; font-size: 16px; color: #1e293b; margin-bottom: 4px;">
                Reserve Without Payment
              </div>
              <div style="font-size: 13px; color: #64748b;">
                We'll contact you to arrange payment before the shoot.
              </div>
            </div>
            <div class="payment-radio"></div>
          </div>
        </div>

        <div class="button-group">
          <button type="button" class="btn btn-secondary" onclick="goToStep(3)" style="flex: 1;">
            Back
          </button>
          <button type="button" class="btn btn-primary" id="completeBookingBtn" onclick="completeBooking()" style="flex: 2;" disabled>
            <div class="loading-spinner"></div>
            <span id="completeBookingText">Complete Booking</span>
          </button>
        </div>
      </div>

      <!-- Step 5: Confirmation (will add later) -->

    </div>
  </div>

  <script>
    // Territory Configuration
    const NORTH_POSTCODES = [
      'B', 'CV', 'LE', 'DE', 'NG', 'S', 'DN', 'HU', 'YO', 'LS', 'BD', 'HX', 
      'WF', 'HD', 'M', 'OL', 'BL', 'WN', 'SK', 'L', 'WA', 'CH', 'CW', 'ST', 
      'TF', 'SY', 'WV', 'WS', 'DY', 'CF', 'SA', 'NP', 'LL', 'LD'
    ];

    const PHOTOGRAPHERS = {
      north: {
        name: 'Northern Photographer',
        territory: 'North'
      },
      south: {
        name: 'Southern Photographer',
        territory: 'South'
      }
    };

    let currentStep = 1;
    let bookingData = {
      postcode: '',
      propertyAddress: '',
      territory: '',
      photographer: '',
      selectedDate: null,
      selectedTime: null,
      service: null,
      bedrooms: 4,
      basePrice: 0,
      extraBedroomFee: 0,
      totalPrice: 0,
      clientName: '',
      clientEmail: '',
      clientPhone: '',
      clientNotes: '',
      paymentOption: null
    };

    let currentCalendarDate = new Date();
    let existingBookings = [];

    // Service Catalog
    const SERVICES = {
      north: [
        {
          id: 'complete-branding',
          name: 'Complete Branding Package - Photo & Video',
          price: 894.00,
          duration: 300, // 5 hours in minutes
          description: 'Full personal branding suite for estate agents. Photography and video content.',
          isPropertyService: false
        },
        {
          id: 'branding-video',
          name: 'Branding Videography Session',
          price: 534.00,
          duration: 180,
          description: 'Personal branding video for estate agents. Multiple sequences for social content.',
          isPropertyService: false
        },
        {
          id: 'branding-photo',
          name: 'Branding Photography Session - 10 Signature Shots',
          price: 414.00,
          duration: 120,
          description: 'Personal branding for estate agents. You\'re in every shot.',
          isPropertyService: false
        },
        {
          id: 'gold-package',
          name: 'Gold Package',
          price: 600.00,
          duration: 150,
          description: 'Everything in our Silver Package, plus enhanced lifestyle content.',
          isPropertyService: true
        },
        {
          id: 'silver-package',
          name: 'Silver Package (Most Popular)',
          price: 262.80,
          duration: 90,
          description: 'Everything in our Bronze Package, plus full videography and drone shots for complete property marketing.',
          popular: true,
          isPropertyService: true
        },
        {
          id: 'all-in-one-drone',
          name: 'All In One Drone',
          price: 214.80,
          duration: 45,
          description: '10 aerial photos and a 30-second drone video for your property marketing.',
          isPropertyService: true
        },
        {
          id: 'property-video',
          name: 'Property Videography',
          price: 154.80,
          duration: 60,
          description: 'Shot in 4K to captivate viewers and drive enquiries.',
          isPropertyService: true
        },
        {
          id: 'property-photo',
          name: 'Property Photography',
          price: 118.80,
          duration: 45,
          description: 'Up to 30 magazine-quality images that make your property irresistible to potential buyers.',
          isPropertyService: true
        },
        {
          id: 'drone-video',
          name: 'Property Drone Videography',
          price: 130.80,
          duration: 20,
          description: 'Up to 30-second cinematic aerial showcase.',
          isPropertyService: true
        },
        {
          id: 'drone-photo',
          name: 'Property Drone Photography',
          price: 130.80,
          duration: 20,
          description: 'Up to 10 stunning aerial photographs.',
          isPropertyService: true
        }
      ],
      south: [
        {
          id: 'gold-package',
          name: 'Gold Package',
          price: 600.00,
          duration: 150,
          description: 'Everything in our Silver Package, plus enhanced lifestyle content.',
          isPropertyService: true
        },
        {
          id: 'silver-package',
          name: 'Silver Package (Most Popular)',
          price: 262.80,
          duration: 90,
          description: 'Everything in our Bronze Package, plus full videography and drone shots for complete property marketing.',
          popular: true,
          isPropertyService: true
        },
        {
          id: 'all-in-one-drone',
          name: 'All In One Drone',
          price: 214.80,
          duration: 45,
          description: '10 aerial photos and a 30-second drone video for your property marketing.',
          isPropertyService: true
        },
        {
          id: 'property-video',
          name: 'Property Videography',
          price: 154.80,
          duration: 60,
          description: 'Shot in 4K to captivate viewers and drive enquiries.',
          isPropertyService: true
        },
        {
          id: 'property-photo',
          name: 'Property Photography',
          price: 118.80,
          duration: 45,
          description: 'Up to 30 magazine-quality images that make your property irresistible to potential buyers.',
          isPropertyService: true
        },
        {
          id: 'drone-video',
          name: 'Property Drone Videography',
          price: 130.80,
          duration: 20,
          description: 'Up to 30-second cinematic aerial showcase.',
          isPropertyService: true
        },
        {
          id: 'drone-photo',
          name: 'Property Drone Photography',
          price: 130.80,
          duration: 20,
          description: 'Up to 10 stunning aerial photographs.',
          isPropertyService: true
        }
      ]
    };

    // Validate UK Postcode Format
    function validatePostcode(postcode) {
      const postcodeRegex = /^[A-Z]{1,2}[0-9]{1,2}[A-Z]?\s?[0-9][A-Z]{2}$/i;
      return postcodeRegex.test(postcode.trim());
    }

    // Determine Territory from Postcode
    function determineTerritory(postcode) {
      const cleanPostcode = postcode.trim().toUpperCase().replace(/\s/g, '');
      const outcodeArea = cleanPostcode.match(/^[A-Z]+/)[0];
      
      // Check if it's a northern postcode
      const isNorth = NORTH_POSTCODES.includes(outcodeArea);
      
      return {
        territory: isNorth ? 'north' : 'south',
        photographer: isNorth ? PHOTOGRAPHERS.north : PHOTOGRAPHERS.south,
        isServiceable: isNorth // For now, only service North
      };
    }

    // Check Postcode and Show Territory
    async function checkPostcode() {
      const postcodeInput = document.getElementById('postcode');
      const postcode = postcodeInput.value;
      const errorMsg = document.getElementById('postcodeError');
      const checkBtn = document.getElementById('checkPostcodeBtn');
      const territoryInfo = document.getElementById('territoryInfo');
      const unavailableInfo = document.getElementById('unavailableInfo');

      // Reset states
      postcodeInput.classList.remove('error');
      errorMsg.classList.remove('show');
      territoryInfo.classList.remove('show');
      unavailableInfo.classList.remove('show');

      // Validate format
      if (!validatePostcode(postcode)) {
        postcodeInput.classList.add('error');
        errorMsg.classList.add('show');
        return;
      }

      // Show loading
      checkBtn.classList.add('loading');
      checkBtn.disabled = true;

      // Simulate API delay
      await new Promise(resolve => setTimeout(resolve, 800));

      // Determine territory
      const result = determineTerritory(postcode);

      // Store booking data
      bookingData.postcode = postcode.toUpperCase();
      bookingData.territory = result.territory;
      bookingData.photographer = result.photographer.name;

      // Show result
      if (result.isServiceable) {
        // Show success info
        const territoryBadge = document.getElementById('territoryBadge');
        territoryBadge.className = `territory-badge ${result.territory}`;
        territoryBadge.textContent = result.territory.toUpperCase();
        
        document.getElementById('photographerName').textContent = result.photographer.name;
        territoryInfo.classList.add('show');

        // Show address section
        document.getElementById('addressSection').style.display = 'block';
        
        // Hide postcode button, show continue button
        document.getElementById('checkPostcodeBtn').style.display = 'none';
        document.getElementById('continueWithAddressBtn').style.display = 'block';

        // Scroll to address field
        setTimeout(() => {
          document.getElementById('propertyAddress').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          document.getElementById('propertyAddress').focus();
        }, 500);

      } else {
        // Show unavailable message
        unavailableInfo.classList.add('show');
      }

      // Remove loading
      checkBtn.classList.remove('loading');
      checkBtn.disabled = false;
    }

    // Navigate to Step
    function goToStep(stepNumber) {
      // Update current step
      currentStep = stepNumber;

      // Hide all sections
      document.querySelectorAll('.form-section').forEach(section => {
        section.classList.remove('active');
      });

      // Show target section
      document.getElementById(`step${stepNumber}`).classList.add('active');

      // Update step indicators
      document.querySelectorAll('.step').forEach((step, index) => {
        const stepNum = index + 1;
        step.classList.remove('active', 'completed');
        
        if (stepNum < stepNumber) {
          step.classList.add('completed');
        } else if (stepNum === stepNumber) {
          step.classList.add('active');
        }
      });

      // Special logic for step 3 (service selection)
      if (stepNumber === 3) {
        renderServices();
      }

      // Special logic for step 2 (calendar)
      if (stepNumber === 2) {
        renderCalendar();
      }

      // Special logic for step 4 (populate summary)
      if (stepNumber === 4) {
        populateBookingSummary();
      }

      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Populate Booking Summary in Step 4
    function populateBookingSummary() {
      // Service
      document.getElementById('summaryService').textContent = bookingData.service ? bookingData.service.name : '-';
      
      // Date & Time
      if (bookingData.selectedDate && bookingData.selectedTime) {
        const date = new Date(bookingData.selectedDate + 'T12:00:00');
        const options = { weekday: 'short', day: 'numeric', month: 'short', year: 'numeric' };
        const formattedDate = date.toLocaleDateString('en-GB', options);
        document.getElementById('summaryDateTime').textContent = `${formattedDate} at ${bookingData.selectedTime}`;
      } else {
        document.getElementById('summaryDateTime').textContent = '-';
      }
      
      // Location
      document.getElementById('summaryLocation').textContent = bookingData.propertyAddress || bookingData.postcode || '-';
      
      // Total
      document.getElementById('summaryTotal').textContent = `£${bookingData.totalPrice.toFixed(2)}`;
    }

    // Select Payment Option
    function selectPaymentOption(option) {
      bookingData.paymentOption = option;
      
      // Update UI
      document.querySelectorAll('.payment-option').forEach(opt => {
        opt.classList.remove('selected');
      });
      event.target.closest('.payment-option').classList.add('selected');
      
      // Update button text
      const submitBtn = document.getElementById('submitBtnText');
      if (option === 'pay-now') {
        submitBtn.textContent = 'Proceed to Payment';
      } else {
        submitBtn.textContent = 'Complete Booking';
      }
      
      // Enable submit button if form is valid
      validateStep4Form();
    }

    // Validate Step 4 Form
    function validateStep4Form() {
      const name = document.getElementById('clientName').value.trim();
      const email = document.getElementById('clientEmail').value.trim();
      const phone = document.getElementById('clientPhone').value.trim();
      const paymentOption = bookingData.paymentOption;
      
      const submitBtn = document.getElementById('submitBookingBtn');
      
      if (name && email && phone && paymentOption) {
        submitBtn.disabled = false;
      } else {
        submitBtn.disabled = true;
      }
    }

    // Add event listeners for form validation
    document.addEventListener('DOMContentLoaded', function() {
      const nameField = document.getElementById('clientName');
      const emailField = document.getElementById('clientEmail');
      const phoneField = document.getElementById('clientPhone');
      
      if (nameField) nameField.addEventListener('input', validateStep4Form);
      if (emailField) emailField.addEventListener('input', validateStep4Form);
      if (phoneField) phoneField.addEventListener('input', validateStep4Form);
    });

    // Submit Booking
    async function submitBooking() {
      // Get form values
      const name = document.getElementById('clientName').value.trim();
      const email = document.getElementById('clientEmail').value.trim();
      const phone = document.getElementById('clientPhone').value.trim();
      const notes = document.getElementById('clientNotes').value.trim();
      
      // Reset errors
      document.querySelectorAll('.error-message').forEach(msg => msg.classList.remove('show'));
      document.querySelectorAll('.form-input').forEach(input => input.classList.remove('error'));
      
      // Validate
      let hasError = false;
      
      if (!name || name.length < 2) {
        document.getElementById('clientName').classList.add('error');
        document.getElementById('nameError').classList.add('show');
        hasError = true;
      }
      
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!email || !emailRegex.test(email)) {
        document.getElementById('clientEmail').classList.add('error');
        document.getElementById('emailError').classList.add('show');
        hasError = true;
      }
      
      const phoneRegex = /^[\d\s\+\-\(\)]+$/;
      if (!phone || phone.length < 10 || !phoneRegex.test(phone)) {
        document.getElementById('clientPhone').classList.add('error');
        document.getElementById('phoneError').classList.add('show');
        hasError = true;
      }
      
      if (hasError) return;
      
      // Store client data
      bookingData.clientName = name;
      bookingData.clientEmail = email;
      bookingData.clientPhone = phone;
      bookingData.clientNotes = notes;
      
      // Show loading
      const submitBtn = document.getElementById('submitBookingBtn');
      submitBtn.classList.add('loading');
      submitBtn.disabled = true;
      
      try {
        if (bookingData.paymentOption === 'pay-now') {
          // Redirect to Stripe payment (will build this)
          await processStripePayment();
        } else {
          // Create booking without payment
          await createBooking();
        }
      } catch (error) {
        console.error('Booking error:', error);
        alert('Failed to create booking. Please try again.');
        submitBtn.classList.remove('loading');
        submitBtn.disabled = false;
      }
    }

    // Create Booking (Reserve Without Payment)
    async function createBooking() {
      const bookingPayload = {
        postcode: bookingData.postcode,
        propertyAddress: bookingData.propertyAddress,
        territory: bookingData.territory,
        photographer: bookingData.photographer,
        date: bookingData.selectedDate,
        time: bookingData.selectedTime,
        service: bookingData.service.name,
        serviceId: bookingData.service.id,
        duration: bookingData.service.duration,
        bedrooms: bookingData.bedrooms,
        basePrice: bookingData.basePrice,
        extraBedroomFee: bookingData.extraBedroomFee,
        totalPrice: bookingData.totalPrice,
        clientName: bookingData.clientName,
        clientEmail: bookingData.clientEmail,
        clientPhone: bookingData.clientPhone,
        clientNotes: bookingData.clientNotes,
        paymentOption: bookingData.paymentOption,
        status: 'Booked'
      };
      
      console.log('Creating booking:', bookingPayload);
      
      // TODO: Send to Netlify function to create Airtable record
      // For now, just show success message
      alert('Booking created successfully! We will contact you shortly.');
      
      // Reset form
      window.location.reload();
    }

    // Process Stripe Payment
    async function processStripePayment() {
      // TODO: Implement Stripe checkout
      console.log('Processing Stripe payment...');
      alert('Stripe payment coming soon!');
    }

    // Change Month
    function changeMonth(direction) {
      currentCalendarDate.setMonth(currentCalendarDate.getMonth() + direction);
      renderCalendar();
    }

    // Render Calendar
    function renderCalendar() {
      const year = currentCalendarDate.getFullYear();
      const month = currentCalendarDate.getMonth();
      
      // Update month display
      const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
      document.getElementById('calendarMonth').textContent = `${monthNames[month]} ${year}`;

      // Get first and last day of month
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      const daysInMonth = lastDay.getDate();
      const startDay = firstDay.getDay(); // 0 = Sunday

      // Today
      const today = new Date();
      today.setHours(0, 0, 0, 0);

      // Max booking date (60 days from now)
      const maxDate = new Date();
      maxDate.setDate(maxDate.getDate() + 60);
      maxDate.setHours(23, 59, 59, 999);

      // Build calendar grid
      const grid = document.getElementById('calendarGrid');
      let html = '';

      // Day labels
      const dayLabels = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      dayLabels.forEach(label => {
        html += `<div class="calendar-day day-label">${label}</div>`;
      });

      // Empty cells before first day
      for (let i = 0; i < startDay; i++) {
        html += `<div class="calendar-day disabled other-month"></div>`;
      }

      // Days of month
      for (let day = 1; day <= daysInMonth; day++) {
        const date = new Date(year, month, day);
        date.setHours(0, 0, 0, 0);
        
        const isPast = date < today;
        const isTooFarAhead = date > maxDate;
        const isSunday = date.getDay() === 0; // Disable Sundays
        const isDisabled = isPast || isTooFarAhead || isSunday;
        const isToday = date.getTime() === today.getTime();
        const isSelected = bookingData.selectedDate && date.getTime() === new Date(bookingData.selectedDate).getTime();

        let classes = 'calendar-day';
        if (isDisabled) classes += ' disabled';
        if (isToday) classes += ' today';
        if (isSelected) classes += ' selected';

        const dateString = date.toISOString().split('T')[0];
        html += `<div class="${classes}" onclick="${isDisabled ? '' : `selectDate('${dateString}')`}">${day}</div>`;
      }

      grid.innerHTML = html;
    }

    // Select Date
    async function selectDate(dateString) {
      bookingData.selectedDate = dateString;
      bookingData.selectedTime = null;

      // Update UI
      renderCalendar();

      // Show time slot section
      document.getElementById('timeSlotSection').style.display = 'block';
      document.getElementById('loadingTimeSlots').style.display = 'block';
      document.getElementById('timeSlotGrid').style.display = 'none';

      // Format date for display
      const date = new Date(dateString + 'T12:00:00');
      const options = { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' };
      document.getElementById('selectedDateDisplay').textContent = date.toLocaleDateString('en-GB', options);

      // Fetch available time slots
      await loadAvailableTimeSlots(dateString);

      // Scroll to time slots
      document.getElementById('timeSlotSection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    // Load Available Time Slots
    async function loadAvailableTimeSlots(dateString) {
      try {
        // For now, generate all time slots (9am-5pm, 30-min intervals)
        // Later we'll check against existing bookings and calculate drive times

        const timeSlots = [];
        for (let hour = 9; hour <= 17; hour++) {
          for (let minute of [0, 30]) {
            if (hour === 17 && minute === 30) break; // Stop at 5:00 PM
            
            const timeString = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
            timeSlots.push({
              time: timeString,
              available: true // We'll implement availability checking next
            });
          }
        }

        // Render time slots
        renderTimeSlots(timeSlots);

      } catch (error) {
        console.error('Error loading time slots:', error);
        document.getElementById('loadingTimeSlots').innerHTML = '<p style="color: #ef4444;">Failed to load time slots. Please try again.</p>';
      }
    }

    // Render Time Slots
    function renderTimeSlots(slots) {
      const grid = document.getElementById('timeSlotGrid');
      
      const html = slots.map(slot => {
        const classes = slot.available ? 'time-slot' : 'time-slot disabled';
        const onclick = slot.available ? `selectTimeSlot('${slot.time}')` : '';
        
        return `<div class="${classes}" onclick="${onclick}">${slot.time}</div>`;
      }).join('');

      grid.innerHTML = html;
      
      // Hide loading, show grid
      document.getElementById('loadingTimeSlots').style.display = 'none';
      document.getElementById('timeSlotGrid').style.display = 'grid';
    }

    // Select Time Slot
    function selectTimeSlot(time) {
      bookingData.selectedTime = time;

      // Update UI
      document.querySelectorAll('.time-slot').forEach(slot => {
        slot.classList.remove('selected');
      });
      event.target.classList.add('selected');

      // Enable continue button
      document.getElementById('continueToServiceBtn').disabled = false;
    }

    // Render Services Based on Territory
    function renderServices() {
      const territory = bookingData.territory;
      const services = SERVICES[territory] || SERVICES.south;
      const container = document.getElementById('serviceCards');

      const servicesHTML = services.map(service => `
        <div class="service-card ${service.popular ? 'popular' : ''}" data-service-id="${service.id}" onclick="selectService('${service.id}')">
          ${service.popular ? '<div class="popular-badge">Most Popular</div>' : ''}
          <div style="flex: 1;">
            <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin-bottom: 6px;">
              ${service.name}
            </h3>
            <p style="font-size: 14px; color: #64748b; line-height: 1.5; margin-bottom: 12px;">
              ${service.description}
            </p>
            <div style="display: flex; align-items: center; gap: 16px;">
              <span style="font-size: 13px; color: #94a3b8;">
                ${Math.floor(service.duration / 60)}h ${service.duration % 60}m
              </span>
              <span style="font-size: 20px; font-weight: 700; color: #3b82f6;">
                £${service.price.toFixed(2)}
              </span>
            </div>
          </div>
          <div class="service-radio"></div>
        </div>
      `).join('');

      container.innerHTML = servicesHTML;
    }

    // Select Service
    function selectService(serviceId) {
      const territory = bookingData.territory;
      const services = SERVICES[territory] || SERVICES.south;
      const service = services.find(s => s.id === serviceId);

      if (!service) return;

      // Update booking data
      bookingData.service = service;
      bookingData.basePrice = service.price;

      // Update UI - highlight selected service
      document.querySelectorAll('.service-card').forEach(card => {
        card.classList.remove('selected');
      });
      document.querySelector(`[data-service-id="${serviceId}"]`).classList.add('selected');

      // Show/hide bedroom section based on service type
      const bedroomSection = document.getElementById('bedroomSection');
      if (service.isPropertyService) {
        bedroomSection.style.display = 'block';
        bookingData.bedrooms = 4; // Reset to default
        document.getElementById('bedroomCount').textContent = 4;
      } else {
        bedroomSection.style.display = 'none';
        bookingData.bedrooms = 0;
      }

      // Calculate and show price
      calculatePrice();

      // Enable continue button
      document.getElementById('continueToDetailsBtn').disabled = false;
    }

    // Adjust Bedrooms
    function adjustBedrooms(change) {
      const currentBedrooms = bookingData.bedrooms;
      const newBedrooms = Math.max(1, Math.min(15, currentBedrooms + change));
      
      bookingData.bedrooms = newBedrooms;
      document.getElementById('bedroomCount').textContent = newBedrooms;

      // Show/hide fee notice
      const feeNotice = document.getElementById('bedroomFeeNotice');
      if (newBedrooms > 4) {
        feeNotice.style.display = 'block';
      } else {
        feeNotice.style.display = 'none';
      }

      // Recalculate price
      calculatePrice();
    }

    // Calculate Total Price
    function calculatePrice() {
      if (!bookingData.service) return;

      const basePrice = bookingData.basePrice;
      const extraBedroomFee = bookingData.bedrooms > 4 ? 30 : 0;
      const totalPrice = basePrice + extraBedroomFee;

      bookingData.extraBedroomFee = extraBedroomFee;
      bookingData.totalPrice = totalPrice;

      // Update UI
      document.getElementById('servicePrice').textContent = `£${basePrice.toFixed(2)}`;
      document.getElementById('totalPrice').textContent = `£${totalPrice.toFixed(2)}`;

      const bedroomFeeRow = document.getElementById('bedroomFeeRow');
      if (extraBedroomFee > 0) {
        bedroomFeeRow.style.display = 'flex';
      } else {
        bedroomFeeRow.style.display = 'none';
      }

      // Show price breakdown
      document.getElementById('priceBreakdown').style.display = 'block';
    }

    // Auto-format postcode as user types
    document.getElementById('postcode').addEventListener('input', function(e) {
      let value = e.target.value.toUpperCase().replace(/\s/g, '');
      
      // Add space before last 3 characters if length > 3
      if (value.length > 3) {
        value = value.slice(0, -3) + ' ' + value.slice(-3);
      }
      
      e.target.value = value;
    });

    // Allow Enter key to submit
    document.getElementById('postcode').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        checkPostcode();
      }
    });

    // Proceed to Calendar (after address entered)
    function proceedToCalendar() {
      const addressInput = document.getElementById('propertyAddress');
      const address = addressInput.value.trim();
      const errorMsg = document.getElementById('addressError');

      // Reset error
      addressInput.classList.remove('error');
      errorMsg.classList.remove('show');

      // Validate address
      if (!address || address.length < 10) {
        addressInput.classList.add('error');
        errorMsg.classList.add('show');
        addressInput.focus();
        return;
      }

      // Store address
      bookingData.propertyAddress = address;

      // Move to calendar
      goToStep(2);
    }

    // Allow Enter key on address field
    document.addEventListener('DOMContentLoaded', function() {
      const addressField = document.getElementById('propertyAddress');
      if (addressField) {
        addressField.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            proceedToCalendar();
          }
        });
      }
    });

    console.log('Booking Platform Initialized');
    console.log('Territory: North = Birmingham and above');
    console.log('Routing: Next shoot must be within 45 mins drive');
  </script>
</body>
</html>